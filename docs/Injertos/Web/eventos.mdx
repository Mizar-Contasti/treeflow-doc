---
sidebar_position: 3
---

# Funcionalidades del Widget

El Widget Web de TreeFlow soporta m칰ltiples funcionalidades avanzadas para crear experiencias conversacionales m치s ricas e interactivas.



## Evento de Inicio

### Start Event

El **Start Event** es un evento 칰nico que se dispara autom치ticamente cuando el widget se inicializa, activando una intenci칩n espec칤fica en tu 치rbol conversacional.

```javascript
window.treeflowConfig = {
  treeId: 'tu-tree-id',
  startEvent: 'sys.welcome'  // Solo se acepta un evento
};
```

**Funcionamiento:**
- Solo se puede configurar **un evento de inicio**
- El evento activa una **intenci칩n con el mismo nombre** en tu 치rbol
- Se dispara autom치ticamente al inicializar el widget

#### Ejemplos de Eventos Comunes

| Evento | Intenci칩n Activada | Descripci칩n |
|--------|-------------------|-------------|
| `sys.welcome` | `sys.welcome` | Mensaje de bienvenida del sistema |
| `user.first_visit` | `user.first_visit` | Primera visita del usuario |
| `page.product` | `page.product` | Usuario en p치gina de producto |
| `support.help` | `support.help` | Solicitud de ayuda |

#### Configuraci칩n en el 츼rbol

Para que el evento funcione, debes crear una **Rama** en tu 치rbol con el mismo nombre:

1. Ve a tu 치rbol en TreeFlow
2. Crea una nueva Rama llamada exactamente igual al evento (ej: `sys.welcome`)
3. Configura la respuesta que quieres mostrar
4. El widget activar치 autom치ticamente esta rama al iniciar

## Funcionalidades Avanzadas

### Micr칩fono (Voice Input)

Permite a los usuarios enviar mensajes de voz:

```html
<treeflow-widget 
  tree-id="tu-tree-id"
  microphone="true">
</treeflow-widget>
```

#### Configuraci칩n Avanzada del Micr칩fono

```javascript
window.treeflowConfig = {
  treeId: 'tu-tree-id',
  features: {
    microphone: {
      enabled: true,
      language: 'es-ES',
      continuous: false,
      interimResults: true,
      maxAlternatives: 1
    }
  }
};
```

### Adjuntar Archivos

Permite el env칤o de archivos e im치genes:

```html
<treeflow-widget 
  tree-id="tu-tree-id"
  file-upload="true">
</treeflow-widget>
```

#### Configuraci칩n de Archivos

```javascript
window.treeflowConfig = {
  treeId: 'tu-tree-id',
  features: {
    fileUpload: {
      enabled: true,
      maxSize: 5242880, // 5MB en bytes
      allowedTypes: ['image/*', '.pdf', '.doc', '.docx'],
      multiple: false
    }
  }
};
```

### Response Delay

Simula tiempo de "escritura" del bot para una experiencia m치s natural:

```html
<treeflow-widget 
  tree-id="tu-tree-id"
  response-delay="true"
  response-delay-seconds="1500">
</treeflow-widget>
```

#### Configuraci칩n Din치mica del Delay

```javascript
window.treeflowConfig = {
  treeId: 'tu-tree-id',
  responseDelay: {
    enabled: true,
    baseDelay: 1000,
    perCharacter: 50, // ms adicionales por car치cter
    maxDelay: 3000,
    minDelay: 500
  }
};
```

## Modo Debug

### Activaci칩n del Modo Debug

```html
<treeflow-widget 
  tree-id="tu-tree-id"
  debug="true">
</treeflow-widget>
```

### Caracter칤sticas del Modo Debug

- **Vista completa**: El widget ocupa toda la pantalla
- **Bot칩n debug por mensaje**: Cada respuesta del bot incluye un bot칩n 游
- **Modal de informaci칩n**: Muestra request/response completo
- **Datos t칠cnicos**: Informaci칩n sin filtrar del backend

### Informaci칩n Disponible en Debug

```json
{
  "request": {
    "type": "text",
    "value": "mensaje del usuario",
    "tree_id": "6c295eca-5a9f-4588-b1db-1cf5c05f05ee",
    "session_id": "uuid-de-sesion",
    "timestamp": "2024-01-15T10:30:00Z"
  },
  "response": {
    "response": "respuesta del bot",
    "suggestions": ["opci칩n 1", "opci칩n 2"],
    "metadata": {
      "branch_activated": "consulta_producto",
      "confidence": 0.95,
      "parameters": {
        "producto": "laptop"
      },
      "contexts": ["shopping", "electronics"],
      "events": ["product.inquiry"]
    }
  }
}
```



---

:::tip Desarrollo y Testing

Usa el modo debug durante el desarrollo para entender c칩mo interact칰a el widget con tu backend. Los eventos personalizados son especialmente 칰tiles para crear experiencias contextuales basadas en el comportamiento del usuario en tu sitio.

:::
