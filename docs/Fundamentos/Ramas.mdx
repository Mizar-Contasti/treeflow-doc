---
sidebar_position: 5
---

# Ramas

Las **Ramas** en TreeFlow son el equivalente a las intenciones en otros sistemas de chatbots. Representan los diferentes patrones de conversación que tu árbol puede reconocer y responder.

## ¿Qué es una Rama?

Una rama define:
- Los patrones de texto que el usuario puede escribir
- Las respuestas que el árbol debe proporcionar
- Los parámetros que se deben extraer de la entrada del usuario
- Los contextos de entrada y salida
- Los eventos que se pueden activar

## Tipos de Ramas

TreeFlow soporta dos tipos principales de ramas:

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs>
  <TabItem value="conversacionales" label="Ramas Conversacionales" default>
    <p>Son las ramas estándar que manejan la interacción directa con el usuario. Estas ramas:</p>
    <ul>
      <li>Reconocen patrones específicos en los mensajes del usuario</li>
      <li>Extraen información relevante usando hojas (entidades)</li>
      <li>Proporcionan respuestas basadas en la entrada del usuario</li>
      <li>Pueden ser creadas y modificadas libremente por el usuario</li>
    </ul>
  </TabItem>
  <TabItem value="sistema" label="Ramas de Sistema">
    <p>Son ramas especiales que no se activan directamente por la entrada del usuario, sino por eventos del sistema o por otras ramas. Estas ramas:</p>
    <ul>
      <li>Se activan mediante eventos específicos</li>
      <li>Realizan acciones en segundo plano</li>
      <li>Pueden modificar el estado de la conversación</li>
    </ul>
    <div className="alert alert--warning">
      <p>
        <strong>Importante:</strong> Las ramas de sistema son predefinidas y actualmente no pueden ser modificadas por el usuario. Se utilizan para manejar funcionalidades específicas de la plataforma.
      </p>
    </div>
  </TabItem>
</Tabs>

## Crear una Nueva Rama

Para crear una nueva rama:

1. Selecciona un árbol existente
2. Navega a la sección "Ramas"
3. Haz clic en "Nueva Rama"
4. Proporciona un nombre descriptivo para tu rama
5. Haz clic en "Crear"

Una vez creada la rama, deberás editarla para configurar sus componentes. Revisa la sección "Componentes de una Rama" más adelante para entender qué elementos puedes configurar.

:::tip Recomendación importante
Antes de crear tus ramas, es altamente recomendable tener ya definidos:

1. El flujo conversacional completo (diseño de la conversación)
2. Todas las hojas (entidades) necesarias para extraer información

Esto facilitará enormemente el proceso de creación de ramas y evitará problemas posteriores de entrenamiento y entendimiento del árbol. Recuerda que las ramas dependen de las hojas para extraer información estructurada de las conversaciones.
:::

## Componentes de una Rama

### Nombre

Identificador único y descriptivo de la rama. Es importante usar nombres claros que indiquen la función de la rama.

### Patrones

Los patrones son ejemplos de frases que el usuario podría escribir para activar esta rama. Cuantos más patrones proporciones, mejor será la capacidad del árbol para reconocer esta intención.

Ejemplos de patrones:
```
Quiero ordenar una pizza
Me gustaría pedir una pizza
Tengo hambre, quiero una pizza
```

### Parámetros

Los parámetros son piezas de información que se extraen de la entrada del usuario. Estos solo pueden crearse mediante una hoja referenciada en un patrón y son los que guardan el valor de las palabras clave identificadas.

[Leer más sobre Parámetros](/docs/Avanzado/Parametros)

### Respuestas

Las respuestas son los mensajes que el árbol enviará al usuario cuando se active esta rama. Puedes configurar múltiples respuestas y el sistema elegirá una aleatoriamente.

Tipos de respuestas:
- **Texto**: Respuestas en formato de texto simple
- **Payload**: Respuestas estructuradas para interfaces ricas (botones, carruseles, etc.)

### Contextos

Los contextos son mecanismos que permiten controlar el flujo de la conversación. Funcionan como la "memoria a corto plazo" del árbol, determinando qué ramas pueden activarse en cada momento y cómo se conectan las diferentes partes de una conversación.

[Leer más sobre Contextos](/docs/Avanzado/Contextos)

### Eventos

Los eventos son acciones especiales que se activan cuando se ejecuta una rama. Permiten conectar diferentes partes del árbol, activar ramas de sistema y realizar acciones específicas sin necesidad de una entrada directa del usuario.

[Leer más sobre Eventos](/docs/Avanzado/Eventos)

### Metadata

La metadata es información adicional que se asocia a una rama y que no tiene relación directa con la conversación o el procesamiento del agente. Permite almacenar datos personalizados que pueden ser útiles para la lógica de negocio o para el seguimiento de las interacciones.

### Webhook

Los webhooks permiten conectar tu árbol con servicios externos cuando se activa una rama. Son fundamentales para integrar funcionalidades avanzadas, procesar datos en tiempo real y comunicarse con sistemas externos.

[Leer más sobre Webhooks](/docs/Avanzado/Webhooks)

## Mejores Prácticas para Ramas

1. **Nombres claros**: Usa nombres descriptivos que indiquen la función de la rama
2. **Patrones diversos**: Incluye variaciones naturales de cómo los usuarios podrían expresar la misma intención
3. **Parámetros bien definidos**: Define claramente qué información necesitas extraer
4. **Respuestas variadas**: Proporciona múltiples respuestas para hacer la conversación más natural
5. **Contextos adecuados**: Utiliza contextos para guiar el flujo de la conversación
6. **Prueba regularmente**: Verifica que tus ramas funcionan correctamente en diferentes escenarios

:::tip Consejo
Para ramas complejas, considera dividirlas en múltiples ramas más pequeñas conectadas por contextos. Esto hace que tu árbol sea más fácil de mantener y depurar.
:::
